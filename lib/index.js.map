{"version":3,"sources":["../src/index.js"],"names":["defaultPresets","defaultPlugins","module","exports","config","options","babel","cacheDirectory","babelrc","presets","plugins","isDebug","isNode","concat","targets","node","modules","useBuiltIns","debug","filter","o","add","test","loader","include","resolve","process","cwd","query","use"],"mappings":";;AAOA;;;;;;AAEA,IAAMA,iBAAiB,CACrB,WADqB,EAErB,OAFqB,EAGrB,SAHqB,CAAvB,C,CATA;;;;;;;AAcA,IAAMC,iBAAiB,CACrB,6BADqB,EAErB,4BAFqB,EAGrB,mBAHqB,CAAvB;;AAMAC,OAAOC,OAAP,GAAiB,UAACC,MAAD,EAASC,OAAT,EAAqB;AACpC,MAAIC,cAAJ;AACA,MAAI,CAACD,OAAL,EAAc;AACZC,YAAQ;AACNC,sBAAgB,IADV;AAENC,eAAS,KAFH;AAGNC,eAAST,cAHH;AAINU,eAAST;AAJH,KAAR;AAMD,GAPD,MAOO;AAAA,QACGU,OADH,GACyCN,OADzC,CACGM,OADH;AAAA,QACYF,OADZ,GACyCJ,OADzC,CACYI,OADZ;AAAA,QACqBC,OADrB,GACyCL,OADzC,CACqBK,OADrB;AAAA,QAC8BE,MAD9B,GACyCP,OADzC,CAC8BO,MAD9B;;AAELN,YAAQ;AACNC,sBAAgBI,OADV;AAENH,eAAS,KAFH;AAGNC,eAAST,eAAea,MAAf,CAAsBD,SAAS,CACtC,CACE,KADF,EAEE;AACEE,iBAAS;AACPC,gBAAM;AADC,SADX;AAIEC,iBAAS,KAJX;AAKEC,qBAAa,KALf;AAMEC,eAAO;AANT,OAFF,CADsC,CAAT,GAY5B,EAZM,EAYFL,MAZE,CAYKJ,OAZL,EAYcU,MAZd,CAYqB;AAAA,eAAK,CAAC,CAACC,CAAP;AAAA,OAZrB,CAHH;AAgBNV,eAAST,eAAeY,MAAf,CAAuBD,UAAUD,OAAX,GAAsB,CACnD,4BADmD,EAEnD,0BAFmD,CAAtB,GAG3B,EAHK,EAGDE,MAHC,CAGMH,OAHN,EAGeS,MAHf,CAGsB;AAAA,eAAK,CAAC,CAACC,CAAP;AAAA,OAHtB;AAhBH,KAAR;AAqBD;AACDhB,SAAOiB,GAAP,CAAW,UAAX,EAAuB;AACrBC,UAAM,SADe;AAErBC,YAAQ,cAFa;AAGrBC,aAAS,CAAC,eAAKC,OAAL,CAAaC,QAAQC,GAAR,EAAb,EAA4B,KAA5B,CAAD,CAHY;AAIrBC,WAAOtB;AAJc,GAAvB;AAMAF,SAAOiB,GAAP,CAAW,UAAX,EAAuB;AACrBC,UAAM,QADe;AAErBO,SAAK,CAAC,cAAD,EAAiB,wBAAjB;AAFgB,GAAvB;AAID,CA3CD","file":"index.js","sourcesContent":["/**\n * @Author: Zhengfeng.Yao <yzf>\n * @Date:   2017-05-03 12:05:05\n * @Last modified by:   yzf\n * @Last modified time: 2017-05-03 12:05:07\n */\n\nimport path from 'path'\n\nconst defaultPresets = [\n  'es2015-ie',\n  'react',\n  'stage-2',\n]\nconst defaultPlugins = [\n  'transform-decorators-legacy',\n  'transform-class-properties',\n  'transform-runtime'\n]\n\nmodule.exports = (config, options) => {\n  let babel\n  if (!options) {\n    babel = {\n      cacheDirectory: true,\n      babelrc: false,\n      presets: defaultPresets,\n      plugins: defaultPlugins\n    }\n  } else {\n    const { isDebug, presets, plugins, isNode } = options\n    babel = {\n      cacheDirectory: isDebug,\n      babelrc: false,\n      presets: defaultPresets.concat(isNode ? [\n        [\n          'env',\n          {\n            targets: {\n              node: 'current'\n            },\n            modules: false,\n            useBuiltIns: false,\n            debug: false\n          }\n        ]\n      ]: []).concat(presets).filter(o => !!o),\n      plugins: defaultPlugins.concat((isNode || isDebug) ? [\n        'transform-react-jsx-source',\n        'transform-react-jsx-self'\n      ] : []).concat(plugins).filter(o => !!o)\n    }\n  }\n  config.add('rule.jsx', {\n    test: /\\.jsx?$/,\n    loader: 'babel-loader',\n    include: [path.resolve(process.cwd(), 'src')],\n    query: babel\n  })\n  config.add('rule.est', {\n    test: /\\.est$/,\n    use: ['babel-loader', 'template-string-loader']\n  })\n}\n"]}